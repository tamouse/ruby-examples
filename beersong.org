
#+begin_src ruby
  class Beersong

    attr_accessor :bottles

    def initialize(n)
      self.bottles = n.to_i
      raise ArgumentError unless bottles.is_a?(Integer) && bottles > 0
    end

    def sing
      bottles.downto(0) do |n|
        puts stanza(n)
      end
    end

    def stanza(b)
      <<-SONG
  #{bottles(n)} of beer on the wall,
  #{bottles(n)} of beer!
  Take one down and pass it around,
  #{bottles(n-1)} of beer on the wall!

  SONG
    end

    def bottles(n)
      "#{n > 0 ? n : "No more"} bottle#{(n == 1) ? "" : "s"}"
    end
  end

#+end_src




